<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
{{meta}}
<link rel="stylesheet" href=""/>
<link rel="stylesheet" href=""/>


    <title>{{title}}</title>
</head>
<body>
<div>{{content}}</div>
<footer>
    This is footer for file!
</footer>
<script>
    function testAlert(msg){
        console ? console.log(msg) : alert(msg);
    }


    let titlearr=['<h1 id="this-is-a-test-markdown-file">This is a test markdown file</h1>',
                    '<h2 id="step-one">step one</h2>',
                    '<h2 id="list">list</h2>',
                    '<h3 id="-">其他</h3>',
                    '<h3 id="-">也是一个锻炼</h3>',
                    '<h2 id="-">图片</h2>',
                    '<h2 id="-">表格</h2>'];

const parseToC=(titleArr)=>{
    let toc;
    if(Array.isArray(titleArr)){
        console.log(titleArr);
        let tagStr='',
            target=[].concat(titleArr);
        const organizeUl =(arr,curDeep,html)=>{
            //  取出第一个
            let htmlStr=html,
                cur=arr.shift(), regRes=cur.match(/"\s*>(.*)<\/h\d>/),
                curContent=regRes ? regRes[1] : cur,
                curD=parseInt(cur.substring(2,3));
            if(curDeep == 0){
                htmlStr+='<ul>\n';
                curDeep++;
            }

            if(curDeep == curD){
                htmlStr += `\t<li><a>${curContent}</a></li>\n`;
            }else if(curDeep < curD){
                //  传入 h1 当前 h2， 1<2
                htmlStr += `\t<li><a>${curContent}</a>\n\t<ul>\n`
            } else if(curDeep > curD){
                //  传入 h3 当前 h2， 3>2
                htmlStr += `</ul>\n</li>
\t<li><a>${curContent}</a>\n`

            }

            if(!arr.length){
                organizeUl(arr,curD,htmlStr);
            }else{
                htmlStr+='</ul>\n';
            }
        };
        organizeUl(target,0,tagStr);
        toc=tagStr;
        console.log(tagStr);
    }
    return toc;
};
</script>
</body>
</html>